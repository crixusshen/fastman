!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.fastman=t():e.fastman=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var i=n[o]={i:o,l:!1,exports:{}};return e[o].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=17)}({1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){var t=document.createElement("a");t.setAttribute("href",e);var n=t.href;return t=null,n},i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},r=function(e){return!(null!=e&&(e.length||e.length>0))};t.getAbsoluteUrl=o,t._extends=i,t.isEmpty=r},17:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onApiRequest=t.pageWillAppear=t.onRequest=t.onDynamicLink=t.subscribeNotify=t.onNotify=t.onPushView=t.onNavigationBar=t.onRefresh=t.onBack=t.ready=t.wrapNotOkPayload=t.wrapOkPayload=void 0;var o=n(1),i=n(8),r=navigator.userAgent,a=r.match(/(Android);?[\s\/]+([\d.]+)?/),c=r.match(/(iPad).*OS\s([\d_]+)/),s=r.match(/(iPod)(.*OS\s([\d_]+))?/),f=!c&&r.match(/(iPhone\sOS)\s([\d_]+)/),l=!!r.toLowerCase().match(/DFYJ/i),u=function(e){return e.init(function(e,t){t&&t(data)}),e},d=function(e){var t=function(t){(0,i.log)("ready end"),e(t)};if(l)if(c||f||s){if(window.WebViewJavascriptBridge)return(0,i.log)("ready sync start"),t(WebViewJavascriptBridge);if((0,i.log)("ready async start(push)"),window.WVJBCallbacks)return window.WVJBCallbacks.push(t);(0,i.log)("ready async start(iframe)"),window.WVJBCallbacks=[t];var n=document.createElement("iframe");n.style.display="none",n.src="https://__bridge_loaded__",document.documentElement.appendChild(n),setTimeout(function(){document.documentElement.removeChild(n)},0)}else a?window.WebViewJavascriptBridge?((0,i.log)("ready sync start"),t(u(WebViewJavascriptBridge))):((0,i.log)("ready async start"),document.addEventListener("WebViewJavascriptBridgeReady",function(){t(u(WebViewJavascriptBridge))},!1)):((0,i.log)("other platform ready sync start"),t());else(0,i.log)("non app ready sync start"),t()},p=function(){},y=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}},g=function(){return{code:arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,info:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error"}},v=function(e){var t={complete:p};t=(0,o._extends)({},t,e),(0,i.log)("onBack->"+JSON.stringify(t)),WebViewJavascriptBridge.callHandler("back",t,function(e){(0,i.log)("onBack<-"+JSON.stringify(e)),t.complete(e)})},b=function(e){var t={complete:p};t=(0,o._extends)({},t,e),(0,i.log)("onRefresh->"+JSON.stringify(t)),WebViewJavascriptBridge.callHandler("refresh",t,function(e){(0,i.log)("onRefresh<-"+JSON.stringify(e)),t.complete(e)})},w=function(e){var t={complete:p};t=(0,o._extends)({},t,e),(0,i.log)("onNavigationBar->"+JSON.stringify(t)),WebViewJavascriptBridge.callHandler("navigationBar",t,function(e){(0,i.log)("onNavigationBar<-"+JSON.stringify(e)),t.complete(e)})},J=function(e){var t={title:""};t=(0,o._extends)({},t,e),t.uri&&(-1!=t.uri.indexOf("http")||-1!=t.uri.indexOf("https")||(t.uri=(0,o.getAbsoluteUrl)(t.uri))),(0,i.log)("onPushView->"+JSON.stringify(t)),WebViewJavascriptBridge.callHandler("pushView",t,function(e){(0,i.log)("onPushView<-"+JSON.stringify(e))})},O=function(e){"function"==typeof e&&WebViewJavascriptBridge.registerHandler("pageWillAppear",e)},m=function(e){var t={type:"javascriptNotify"};t=(0,o._extends)({},t,e),(0,i.log)("onNotify->"+JSON.stringify(t)),WebViewJavascriptBridge.callHandler("notify",t,function(e){(0,i.log)("onNotify<-"+JSON.stringify(e))})},N={},h=function(e,t){if("function"==typeof t){var n=e;"sae_video"==n&&(n="notify"),N[n]=t,(0,i.log)("subscribeNotify->"+e),WebViewJavascriptBridge.registerHandler(n,function(e){(0,i.log)("subscribeNotify<-"+JSON.stringify(e)),Object.prototype.toString.call(e).toLocaleLowerCase()=="[object String]".toLocaleLowerCase()&&(e=JSON.parse(e)),N[n]&&N[n](e)})}},B=function(e){var t={url:""};t=(0,o._extends)({},t,e),(0,i.log)("onDynamicLink->"+JSON.stringify(t)),WebViewJavascriptBridge.callHandler("dynamicLink",t,function(e){(0,i.log)("onDynamicLink<-"+JSON.stringify(e))})},S={},k=!1,V=function(e,t,n,o){var r={type:e||"1",payload:t||{}};S[e+"-ok"]="function"==typeof n?n:p,S[e+"-notok"]="function"==typeof o?o:p,(0,i.log)("onRequest->"+JSON.stringify(r)),WebViewJavascriptBridge.callHandler("request",r,function(t){"string"==typeof t&&(t=JSON.parse(t)),(0,i.log)("onRequest<-"+JSON.stringify(t)),t.error||"true"===t.error?"function"==typeof o&&S[e+"-notok"](g(-1,t.info)):"function"==typeof n&&(c||f||s||t.payload)&&S[e+"-ok"](y(t.payload))}),k||(WebViewJavascriptBridge.registerHandler("request",function(t){"string"==typeof t&&(t=JSON.parse(t)),t.error||"true"===t.error?"function"==typeof S[e+"-notok"]&&S[e+"-notok"](g(-1,t.info)):"function"==typeof S[e+"-ok"]&&S[e+"-ok"](y(t.payload))}),k=!0)},_=function(e,t,n,r){if((0,o.isEmpty)(e))throw new Error("functionNo is required ...");var a={funcId:e,payload:t||{}};(0,i.log)("onApiRequest->"+JSON.stringify(a)),WebViewJavascriptBridge.callHandler("apiRequest",a,function(e){if((0,i.log)("onApiRequest<-"+JSON.stringify(e)),"string"==typeof e&&(e=JSON.parse(e)),c||f||s){if(e.error||"true"===e.error)e.payload?"function"==typeof r&&r(g(e.payload.code,e.payload.info)):"function"==typeof r&&r(g(-1,e.info));else if("function"==typeof n){var t={};e.payload&&(t="string"==typeof e.payload.data?JSON.parse(e.payload.data):e.payload.data),n(y(t))}}else if(e.error||"true"===e.error)"function"==typeof r&&r(g(-1,e.info));else{var o={};o="string"==typeof e.payload.data?JSON.parse(e.payload.data):e.payload.data?e.payload.data:{},"0"!=e.payload.code?"function"==typeof r&&r(g(e.payload.code,e.payload.info)):"function"==typeof n&&n(y(o))}})};t.wrapOkPayload=y,t.wrapNotOkPayload=g,t.ready=d,t.onBack=v,t.onRefresh=b,t.onNavigationBar=w,t.onPushView=J,t.onNotify=m,t.subscribeNotify=h,t.onDynamicLink=B,t.onRequest=V,t.pageWillAppear=O,t.onApiRequest=_},8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){new Date};t.log=o}})});