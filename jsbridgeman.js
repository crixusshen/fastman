!function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):"object"==typeof exports?exports.fastman=t():e.fastman=t()}(this,function(){return function(e){function t(o){if(n[o])return n[o].exports;var a=n[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,t),a.l=!0,a.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,o){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:o})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=17)}({1:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){var t=document.createElement("a");t.setAttribute("href",e);var n=t.href;return t=null,n},a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(e[o]=n[o])}return e},i=function(e){return!(null!=e&&(e.length||e.length>0))};t.getAbsoluteUrl=o,t._extends=a,t.isEmpty=i},17:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.onApiRequest=t.pageWillAppear=t.onRequest=t.onDynamicLink=t.subscribeNotify=t.onNotify=t.onPushView=t.onNavigationBar=t.onRefresh=t.onBack=t.ready=t.wrapNotOkPayload=t.wrapOkPayload=void 0;var o=n(1),a=n(8),i=navigator.userAgent,r=i.match(/(Android);?[\s\/]+([\d.]+)?/),c=i.match(/(iPad).*OS\s([\d_]+)/),l=i.match(/(iPod)(.*OS\s([\d_]+))?/),f=!c&&i.match(/(iPhone\sOS)\s([\d_]+)/),s=!!i.toLowerCase().match(/DFYJ/i),d=function(e){return e.init(function(e,t){t&&t(data)}),e},u=function(e){var t=function(t){(0,a.log)("ready end"),e(t)};if(s)if(c||f||l){if(window.WebViewJavascriptBridge)return(0,a.log)("ready sync start"),t(WebViewJavascriptBridge);if((0,a.log)("ready async start(push)"),window.WVJBCallbacks)return window.WVJBCallbacks.push(t);(0,a.log)("ready async start(iframe)"),window.WVJBCallbacks=[t];var n=document.createElement("iframe");n.style.display="none",n.src="https://__bridge_loaded__",document.documentElement.appendChild(n),setTimeout(function(){document.documentElement.removeChild(n)},0)}else r?window.WebViewJavascriptBridge?((0,a.log)("ready sync start"),t(d(WebViewJavascriptBridge))):((0,a.log)("ready async start"),document.addEventListener("WebViewJavascriptBridgeReady",function(){t(d(WebViewJavascriptBridge))},!1)):((0,a.log)("other platform ready sync start"),t());else(0,a.log)("non app ready sync start"),t()},p=function(){},y=function(){return arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}},g=function(){return{code:arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,info:arguments.length>1&&void 0!==arguments[1]?arguments[1]:"error"}},b=function(e){var t={complete:p};t=(0,o._extends)({},t,e),(0,a.log)("onBack->"+JSON.stringify(t)),WebViewJavascriptBridge.callHandler("back",t,function(e){(0,a.log)("onBack<-"+JSON.stringify(e)),t.complete(e)})},v=function(e){var t={complete:p};t=(0,o._extends)({},t,e),(0,a.log)("onRefresh->"+JSON.stringify(t)),WebViewJavascriptBridge.callHandler("refresh",t,function(e){(0,a.log)("onRefresh<-"+JSON.stringify(e)),t.complete(e)})},k=function(e){var t={complete:p};t=(0,o._extends)({},t,e),(0,a.log)("onNavigationBar->"+JSON.stringify(t)),WebViewJavascriptBridge.callHandler("navigationBar",t,function(e){(0,a.log)("onNavigationBar<-"+JSON.stringify(e)),t.complete(e)})},w=function(e){var t={title:""};t=(0,o._extends)({},t,e),t.uri&&(-1!=t.uri.indexOf("http")||-1!=t.uri.indexOf("https")||(t.uri=(0,o.getAbsoluteUrl)(t.uri))),(0,a.log)("onPushView->"+JSON.stringify(t)),WebViewJavascriptBridge.callHandler("pushView",t,function(e){(0,a.log)("onPushView<-"+JSON.stringify(e))})},J=function(e){"function"==typeof e&&WebViewJavascriptBridge.registerHandler("pageWillAppear",e)},m=function(e){var t={type:"javascriptNotify"};t=(0,o._extends)({},t,e),(0,a.log)("onNotify->"+JSON.stringify(t)),WebViewJavascriptBridge.callHandler("notify",t,function(e){(0,a.log)("onNotify<-"+JSON.stringify(e))})},O={},h=function(e,t){if("function"==typeof t){var n=e;"sae_video"==n&&(n="notify"),O[n]=t,(0,a.log)("subscribeNotify->"+e),WebViewJavascriptBridge.registerHandler(n,function(e){(0,a.log)("subscribeNotify<-"+JSON.stringify(e)),Object.prototype.toString.call(e).toLocaleLowerCase()=="[object String]".toLocaleLowerCase()&&(e=JSON.parse(e)),O[n]&&O[n](e)})}},N=function(e){var t={url:""};t=(0,o._extends)({},t,e),(0,a.log)("onDynamicLink->"+JSON.stringify(t)),WebViewJavascriptBridge.callHandler("dynamicLink",t,function(e){(0,a.log)("onDynamicLink<-"+JSON.stringify(e))})},_={},B=!1,S=function(e,t){switch(arguments.length){case 1:return parseInt(Math.random()*e+1,10);case 2:return parseInt(Math.random()*(t-e+1)+e,10);default:return 0}},V=[],W=function e(){var t=S(1e3,9999);return-1!==V.indexOf(t)?e(t):(V.push(t),t)},x=function(e,t,n,o){var i={type:e||"1",payload:t||{},callbackId:W()};_[e+"-ok"]="function"==typeof n?n:p,_[e+"-notok"]="function"==typeof o?o:p,_[e+"_"+i.callbackId+"-ok"]="function"==typeof n?n:p,_[e+"_"+i.callbackId+"-notok"]="function"==typeof o?o:p,(0,a.log)("onRequest->"+JSON.stringify(i)),WebViewJavascriptBridge.callHandler("request",i,function(e){"string"==typeof e&&(e=JSON.parse(e)),(0,a.log)("onRequest<-"+JSON.stringify(e)),e.error||"true"===e.error?e.callbackId&&"function"==typeof _[e.type+"_"+e.callbackId+"-notok"]?_[e.type+"_"+e.callbackId+"-notok"](g(-1,e.info)):"function"==typeof _[e.type+"-notok"]&&_[e.type+"-notok"](g(-1,e.info)):e.callbackId&&"function"==typeof _[e.type+"_"+e.callbackId+"-ok"]?(c||f||l)&&_[e.type+"_"+e.callbackId+"-ok"](y(e.payload)):"function"==typeof _[e.type+"-ok"]&&(c||f||l)&&_[e.type+"-ok"](y(e.payload))}),B||(WebViewJavascriptBridge.registerHandler("request",function(e){"string"==typeof e&&(e=JSON.parse(e)),e.error||"true"===e.error?e.callbackId&&"function"==typeof _[e.type+"_"+e.callbackId+"-notok"]?_[e.type+"_"+e.callbackId+"-notok"](g(-1,e.info)):"function"==typeof _[e.type+"-notok"]&&_[e.type+"-notok"](g(-1,e.info)):e.callbackId&&"function"==typeof _[e.type+"_"+e.callbackId+"-ok"]?_[e.type+"_"+e.callbackId+"-ok"](y(e.payload)):"function"==typeof _[e.type+"-ok"]&&_[e.type+"-ok"](y(e.payload))}),B=!0)},I=function(e,t,n,i){if((0,o.isEmpty)(e))throw new Error("functionNo is required ...");var r={funcId:e,payload:t||{}};(0,a.log)("onApiRequest->"+JSON.stringify(r)),WebViewJavascriptBridge.callHandler("apiRequest",r,function(e){if((0,a.log)("onApiRequest<-"+JSON.stringify(e)),"string"==typeof e&&(e=JSON.parse(e)),c||f||l){if(e.error||"true"===e.error)e.payload?"function"==typeof i&&i(g(e.payload.code,e.payload.info)):"function"==typeof i&&i(g(-1,e.info));else if("function"==typeof n){var t={};e.payload&&(t="string"==typeof e.payload.data?JSON.parse(e.payload.data):e.payload.data),n(y(t))}}else if(e.error||"true"===e.error)"function"==typeof i&&i(g(-1,e.info));else{var o={};o="string"==typeof e.payload.data?JSON.parse(e.payload.data):e.payload.data?e.payload.data:{},"0"!=e.payload.code?"function"==typeof i&&i(g(e.payload.code,e.payload.info)):"function"==typeof n&&n(y(o))}})};t.wrapOkPayload=y,t.wrapNotOkPayload=g,t.ready=u,t.onBack=b,t.onRefresh=v,t.onNavigationBar=k,t.onPushView=w,t.onNotify=m,t.subscribeNotify=h,t.onDynamicLink=N,t.onRequest=x,t.pageWillAppear=J,t.onApiRequest=I},8:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(e){new Date};t.log=o}})});