{"version":3,"sources":["webpack:///webpack/universalModuleDefinition","webpack:///./src/plugins/persist/index.js"],"names":["Persist","options","model","previous","JSON","parse","localStorage","getItem","actions","saveSessionState","state","setItem","stringify","noPrevious","readies","error","window","addEventListener","key","value"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;;;;;;;;;;ACVA;;;AAGA,IAAMA,UAAU,SAAVA,OAAU,CAAUC,OAAV,EAAmB;AAC/B,WAAO;AACHC,eAAO;AACHC,sBAAUC,KAAKC,KAAL,CAAWC,aAAaC,OAAb,CAAqB,uBAArB,CAAX;AADP,SADJ;AAIHC,iBAAS;AACLC,8BAAkB,0BAACC,KAAD,EAAW;AACzBJ,6BAAaK,OAAb,CAAqB,uBAArB,EAA8CP,KAAKQ,SAAL,CAAeF,KAAf,EAAsBG,UAAtB,CAA9C;AACH;AAHI,SAJN;AASHC,iBAAS,CACL,UAACZ,KAAD,EAAQM,OAAR,EAAiBO,KAAjB,EAA2B;AACvBC,mBAAOC,gBAAP,CAAwB,QAAxB,EAAkC,YAAY;AAC1CT,wBAAQC,gBAAR;AACH,aAFD;AAGH,SALI;AATN,KAAP;AAiBH,CAlBD;;AAoBA,SAASI,UAAT,CAAqBK,GAArB,EAA0BC,KAA1B,EAAiC;AAC7B,QAAID,QAAQ,UAAZ,EAAwB,OAAxB,KACK,OAAOC,KAAP;AACR;;QAGGnB,O,GAAAA,O","file":"persistman.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"fastman\"] = factory();\n\telse\n\t\troot[\"fastman\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","/**\n * Created by dfzq on 2017/6/12.\n */\nconst Persist = function (options) {\n    return {\n        model: {\n            previous: JSON.parse(localStorage.getItem('fastman-persist-state'))\n        },\n        actions: {\n            saveSessionState: (state) => {\n                localStorage.setItem('fastman-persist-state', JSON.stringify(state, noPrevious))\n            }\n        },\n        readies: [\n            (model, actions, error) => {\n                window.addEventListener('unload', function () {\n                    actions.saveSessionState()\n                })\n            }\n        ]\n    }\n}\n\nfunction noPrevious (key, value) {\n    if (key === 'previous') return\n    else return value\n}\n\nexport {\n    Persist,\n}\n\n\n// WEBPACK FOOTER //\n// ./src/plugins/persist/index.js"],"sourceRoot":""}