{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6***************","webpack:///./src/scroller/pullUp/infinite-scroll.js"],"names":["handleInfiniteScroll","inf","$","scroller","getScroller","scrollTop","scrollHeight","height","offsetHeight","distance","getAttribute","onTop","hasClass","indexOf","parseInt","trigger","attachInfiniteScroll","infiniteContent","on","infiniteScrollDone","undefined","off","length","remove","initInfiniteScroll","pageContainer","find","infiniteRefresh","document","callback"],"mappings":";;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,O;;;;;;;;;;;;;;;;;;;ACVA;;;;;AAKA;;;AAGA,IAAIA,uBAAuB,SAAvBA,oBAAuB,GAAY;AACnC;AACA,QAAIC,MAAMC,EAAE,IAAF,CAAV;AACA,QAAIC,WAAWD,EAAEE,WAAF,CAAcH,GAAd,CAAf;AACA,QAAII,YAAYF,SAASE,SAAT,EAAhB;AACA,QAAIC,eAAeH,SAASG,YAAT,EAAnB;AACA,QAAIC,SAASN,IAAI,CAAJ,EAAOO,YAApB;AACA,QAAIC,WAAWR,IAAI,CAAJ,EAAOS,YAAP,CAAoB,eAApB,CAAf;AACA,QAAIC,QAAQV,IAAIW,QAAJ,CAAa,qBAAb,CAAZ;AACA,QAAI,CAACH,QAAL,EAAeA,WAAW,EAAX;AACf,QAAI,OAAOA,QAAP,KAAoB,QAApB,IAAgCA,SAASI,OAAT,CAAiB,GAAjB,KAAyB,CAA7D,EAAgE;AAC5DJ,mBAAWK,SAASL,QAAT,EAAmB,EAAnB,IAAyB,GAAzB,GAA+BF,MAA1C;AACH;AACD,QAAIE,WAAWF,MAAf,EAAuBE,WAAWF,MAAX;AACvB,QAAII,KAAJ,EAAW;AACP,YAAIN,YAAYI,QAAhB,EAA0B;AACtBR,gBAAIc,OAAJ,CAAY,UAAZ;AACH;AACJ,KAJD,MAIO;AACH,YAAIV,YAAYE,MAAZ,IAAsBD,eAAeG,QAAzC,EAAmD;AAC/CR,gBAAIc,OAAJ,CAAY,UAAZ;AACH;AACJ;AACJ,CAvBD;;AAyBA;;;;AAIA,IAAMC,uBAAuB,SAAvBA,oBAAuB,CAACC,eAAD,EAAqB;AAC9Cf,MAAEE,WAAF,CAAca,eAAd,EAA+BC,EAA/B,CAAkC,QAAlC,EAA4ClB,oBAA5C;AACH,CAFD;;AAIA;;;;AAIA,IAAMmB,qBAAqB,SAArBA,kBAAqB,CAACF,eAAD,EAAqB;AAC5C,QAAIA,mBAAmBG,SAAvB,EAAkCH,kBAAkB,kBAAlB;AAClCf,MAAEE,WAAF,CAAca,eAAd,EAA+BI,GAA/B,CAAmC,QAAnC,EAA6CrB,oBAA7C;AACA;AACA,QAAGE,EAAE,kCAAF,EAAsCoB,MAAtC,GAA+C,CAAlD,EACIpB,EAAE,kCAAF,EAAsCqB,MAAtC;AACP,CAND;;AAQA;;;;AAIA,IAAMC,qBAAqB,SAArBA,kBAAqB,CAACC,aAAD,EAAmB;AAC1CA,oBAAgBvB,EAAEuB,aAAF,CAAhB;AACA,QAAIR,kBAAkBQ,cAAcb,QAAd,CAAuB,iBAAvB,IAA4Ca,aAA5C,GAA4DA,cAAcC,IAAd,CAAmB,kBAAnB,CAAlF;AACA,QAAIT,gBAAgBK,MAAhB,KAA2B,CAA/B,EAAkC;AAClCN,yBAAqBC,eAArB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACH,CAjBD;;AAmBA;AACA,IAAMU,kBAAkB,SAAlBA,eAAkB,WAAY;AAChCzB,MAAE0B,QAAF,EAAYV,EAAZ,CAAe,UAAf,EAA2B,kBAA3B,EAA+CW,QAA/C;AACH,CAFD;;QAISL,kB,GAAAA,kB;QAAoBG,e,GAAAA,e;QAAiBR,kB,GAAAA,kB","file":"scrollman-infiniteRefresh.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"fastman\"] = factory();\n\telse\n\t\troot[\"fastman\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","/**\n * 无限滚动组件\n * Created by dfzq on 2017/2/17.\n */\n\n/**\n * 处理scroller的onScroll事件\n */\nlet handleInfiniteScroll = function () {\n    // this关键字在箭头符号中拿不到\n    var inf = $(this);\n    var scroller = $.getScroller(inf);\n    var scrollTop = scroller.scrollTop();\n    var scrollHeight = scroller.scrollHeight();\n    var height = inf[0].offsetHeight;\n    var distance = inf[0].getAttribute('data-distance');\n    var onTop = inf.hasClass('infinite-scroll-top');\n    if (!distance) distance = 50;\n    if (typeof distance === 'string' && distance.indexOf('%') >= 0) {\n        distance = parseInt(distance, 10) / 100 * height;\n    }\n    if (distance > height) distance = height;\n    if (onTop) {\n        if (scrollTop < distance) {\n            inf.trigger('infinite');\n        }\n    } else {\n        if (scrollTop + height >= scrollHeight - distance) {\n            inf.trigger('infinite');\n        }\n    }\n}\n\n/**\n * 添加无限滚动组件\n * @param infiniteContent 无限滚动的容器\n */\nconst attachInfiniteScroll = (infiniteContent) => {\n    $.getScroller(infiniteContent).on('scroll', handleInfiniteScroll);\n}\n\n/**\n * 移除无限滚动组件\n * @param infiniteContent 无限滚动的容器\n */\nconst infiniteScrollDone = (infiniteContent) => {\n    if (infiniteContent == undefined) infiniteContent = '.infinite-scroll'\n    $.getScroller(infiniteContent).off('scroll', handleInfiniteScroll);\n    // 如果开发者没有定制化指示器，检查是否使用了系统内置的指示器，如果使用并删除\n    if($('.infinite-scroll-preloader-layer').length > 0)\n        $('.infinite-scroll-preloader-layer').remove();\n}\n\n/**\n * 初始化无限滚动组件\n * @param pageContainer 页面（路由）容器\n */\nconst initInfiniteScroll = (pageContainer) => {\n    pageContainer = $(pageContainer);\n    var infiniteContent = pageContainer.hasClass('infinite-scroll') ? pageContainer : pageContainer.find('.infinite-scroll');\n    if (infiniteContent.length === 0) return;\n    attachInfiniteScroll(infiniteContent);\n    // //如果是顶部无限刷新，要将滚动条初始化于最下端\n    // pageContainer.forEach(function(v){\n    //     if($(v).hasClass('infinite-scroll-top')){\n    //         var height = v.scrollHeight - v.clientHeight;\n    //         $(v).scrollTop(height);\n    //     }\n    // });\n    // function detachEvents() {\n    //     detachInfiniteScroll(infiniteContent);\n    //     pageContainer.off('pageBeforeRemove', detachEvents);\n    // }\n    // pageContainer.on('pageBeforeRemove', detachEvents);\n}\n\n// 无限刷新时触发的刷新回调\nconst infiniteRefresh = callback => {\n    $(document).on('infinite', '.infinite-scroll', callback)\n}\n\nexport { initInfiniteScroll, infiniteRefresh, infiniteScrollDone }\n\n\n// WEBPACK FOOTER //\n// ./src/scroller/pullUp/infinite-scroll.js"],"sourceRoot":""}