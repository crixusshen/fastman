{"version":3,"sources":["webpack:///webpack/universalModuleDefinition?5ca6**********","webpack:///./src/scroller/pullDown/pull-to-refresh-js.js","webpack:///./src/scroller/pullDown/pull-to-refresh.js"],"names":["refreshTime","initPullToRefreshJS","pageContainer","eventsTarget","$","hasClass","find","length","page","parents","scroller","getScroller","container","handleScroll","scrollTop","removeClass","addClass","handleRefresh","trigger","Date","on","destroyPullToRefresh","off","pullToRefreshDoneJS","interval","timeOut","setTimeout","refresh","transitionEnd","pullToRefreshTriggerJS","destroyPullToRefreshJS","pullToRefreshContent","_pullToRefreshJSScroll","initPullToRefresh","isTouched","isMoved","touchesStart","isScrolling","touchesDiff","touchStartTime","useTranslate","startTranslate","translate","wasScrolled","triggerDistance","dynamicTriggerDistance","attr","handleTouchStart","e","device","android","targetTouches","undefined","x","type","pageX","y","pageY","getTime","handleTouchMove","Math","abs","offsetHeight","indexOf","parseInt","ios","osVersion","split","preventDefault","pow","transform","handleTouchEnd","touchEvents","start","move","end","pullToRefreshDone","window","pullToRefreshTrigger"],"mappings":"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","file":"scrollman-pullDownRefresh.js","sourcesContent":["(function webpackUniversalModuleDefinition(root, factory) {\n\tif(typeof exports === 'object' && typeof module === 'object')\n\t\tmodule.exports = factory();\n\telse if(typeof define === 'function' && define.amd)\n\t\tdefine([], factory);\n\telse if(typeof exports === 'object')\n\t\texports[\"fastman\"] = factory();\n\telse\n\t\troot[\"fastman\"] = factory();\n})(this, function() {\nreturn \n\n\n// WEBPACK FOOTER //\n// webpack/universalModuleDefinition","/**\n * Created by dfzq on 2017/2/13.\n */\nvar refreshTime = 0;\nvar initPullToRefreshJS = function(pageContainer) {\n    var eventsTarget = $(pageContainer);\n    if (!eventsTarget.hasClass('pull-down-refresh')) {\n        eventsTarget = eventsTarget.find('.pull-down-refresh');\n    }\n    if (!eventsTarget || eventsTarget.length === 0) return;\n\n    var page = eventsTarget.hasClass('ui-container') ? eventsTarget : eventsTarget.parents('.ui-container');\n    var scroller = $.getScroller(page[0]);\n    if(!scroller) return;\n\n\n    var container = eventsTarget;\n\n    function handleScroll() {\n        if (container.hasClass('refreshing')) return;\n        if (scroller.scrollTop() * -1 >= 44) {\n            container.removeClass('pull-down').addClass('pull-up');\n        } else {\n            container.removeClass('pull-up').addClass('pull-down');\n        }\n    }\n\n    function handleRefresh() {\n        if (container.hasClass('refreshing')) return;\n        container.removeClass('pull-down pull-up');\n        container.addClass('refreshing transitioning');\n        container.trigger('refresh');\n        refreshTime = +new Date();\n    }\n    scroller.on('scroll', handleScroll);\n    scroller.scroller.on('ptr', handleRefresh);\n\n    // Detach Events on page remove\n    function destroyPullToRefresh() {\n        scroller.off('scroll', handleScroll);\n        scroller.scroller.off('ptr', handleRefresh);\n    }\n    eventsTarget[0].destroyPullToRefresh = destroyPullToRefresh;\n\n};\n\nvar pullToRefreshDoneJS = function(container) {\n    container = $(container);\n    if (container.length === 0) container = $('.pull-down-refresh.refreshing');\n    if (container.length === 0) return;\n    var interval = (+new Date()) - refreshTime;\n    var timeOut = interval > 1000 ? 0 : 1000 - interval; //long than bounce time\n    var scroller = $.getScroller(container);\n    setTimeout(function() {\n        scroller.refresh();\n        container.removeClass('refreshing');\n        container.transitionEnd(function() {\n            container.removeClass(\"transitioning\");\n        });\n    }, timeOut);\n};\nvar pullToRefreshTriggerJS = function(container) {\n    container = $(container);\n    if (container.length === 0) container = $('.pull-down-refresh');\n    if (container.hasClass('refreshing')) return;\n    container.addClass('refreshing');\n    var scroller = $.getScroller(container);\n    scroller.scrollTop(44 + 1, 200);\n    container.trigger('refresh');\n};\n\nvar destroyPullToRefreshJS = function(pageContainer) {\n    pageContainer = $(pageContainer);\n    var pullToRefreshContent = pageContainer.hasClass('pull-down-refresh') ? pageContainer : pageContainer.find('.pull-down-refresh');\n    if (pullToRefreshContent.length === 0) return;\n    if (pullToRefreshContent[0].destroyPullToRefresh) pullToRefreshContent[0].destroyPullToRefresh();\n};\n\n$._pullToRefreshJSScroll = {\n    \"initPullToRefresh\": initPullToRefreshJS,\n    \"pullToRefreshDone\": pullToRefreshDoneJS,\n    \"pullToRefreshTrigger\": pullToRefreshTriggerJS,\n    \"destroyPullToRefresh\": destroyPullToRefreshJS,\n};\n\n\n// WEBPACK FOOTER //\n// ./src/scroller/pullDown/pull-to-refresh-js.js","/**\n * Created by dfzq on 2017/2/12.\n */\n$.initPullToRefresh = function(pageContainer) {\n    var eventsTarget = $(pageContainer);\n    // 从子节点中查找是否有pull-down-refresh标注\n    if (!eventsTarget.hasClass('pull-down-refresh')) {\n        eventsTarget = eventsTarget.find('.pull-down-refresh');\n    }\n    if (!eventsTarget || eventsTarget.length === 0) return;\n\n    // dynamicTriggerDistance - 当容器上定义data-ptr-distance则动态计算该layer的实际高度，这只是一个启动特性的标识符\n    // triggerDistance - 下拉距离，超过该距离则触发下拉刷新事件\n    // touchesStart - 存放Touch/Mouse相关坐标位置等参数\n    // touchStartTime - 触发touchStart事件时的time\n    var isTouched, isMoved, touchesStart = {},\n        isScrolling, touchesDiff, touchStartTime, container, refresh = false,\n        useTranslate = false,\n        startTranslate = 0,\n        translate, scrollTop, wasScrolled, triggerDistance, dynamicTriggerDistance;\n\n    container = eventsTarget;\n\n    // 定义向下拉动距离，默认44pt\n    if (container.attr('data-ptr-distance')) {\n        dynamicTriggerDistance = true;\n    } else {\n        triggerDistance = 44;\n    }\n\n    function handleTouchStart(e) {\n        if (isTouched) {\n            // 屏蔽掉安卓系统的双点事件\n            if ($.device.android) {\n                if ('targetTouches' in e && e.targetTouches.length > 1) return;\n            } else return;\n        }\n        isMoved = false;\n        isTouched = true;\n        isScrolling = undefined;\n        wasScrolled = undefined;\n        touchesStart.x = e.type === 'touchstart' ? e.targetTouches[0].pageX : e.pageX;\n        touchesStart.y = e.type === 'touchstart' ? e.targetTouches[0].pageY : e.pageY;\n        touchStartTime = (new Date()).getTime();\n        /*jshint validthis:true */\n        container = $(this);\n    }\n\n    function handleTouchMove(e) {\n        if (!isTouched) return;\n        var pageX = e.type === 'touchmove' ? e.targetTouches[0].pageX : e.pageX;\n        var pageY = e.type === 'touchmove' ? e.targetTouches[0].pageY : e.pageY;\n        // 计算当前是否是垂直方向的滚动操作\n        if (typeof isScrolling === 'undefined') {\n            isScrolling = !!(isScrolling || Math.abs(pageY - touchesStart.y) > Math.abs(pageX - touchesStart.x));\n        }\n        if (!isScrolling) {\n            isTouched = false;\n            return;\n        }\n\n        scrollTop = container[0].scrollTop;\n        if (typeof wasScrolled === 'undefined' && scrollTop !== 0) wasScrolled = true;\n\n        if (!isMoved) {\n            /*jshint validthis:true */\n            container.removeClass('transitioning');\n            if (scrollTop > container[0].offsetHeight) {\n                isTouched = false;\n                return;\n            }\n            if (dynamicTriggerDistance) {\n                triggerDistance = container.attr('data-ptr-distance');\n                if (triggerDistance.indexOf('%') >= 0) triggerDistance = container[0].offsetHeight * parseInt(triggerDistance, 10) / 100;\n            }\n            startTranslate = container.hasClass('refreshing') ? triggerDistance : 0;\n            // if (container[0].scrollHeight === container[0].offsetHeight || !$.device.ios) {\n            //     useTranslate = true;\n            // } else {\n            //     useTranslate = false;\n            // }\n            useTranslate = true;\n        }\n        isMoved = true;\n        touchesDiff = pageY - touchesStart.y;\n\n        if (touchesDiff > 0 && scrollTop <= 0 || scrollTop < 0) {\n            // iOS 8 fix\n            if ($.device.ios && parseInt($.device.osVersion.split('.')[0], 10) > 7 && scrollTop === 0 && !wasScrolled) useTranslate = true;\n\n            if (useTranslate) {\n                e.preventDefault();\n                translate = (Math.pow(touchesDiff, 0.85) + startTranslate);\n                container.transform('translate3d(0,' + translate + 'px,0)');\n                // console.log(translate);\n            } else {}\n            if ((useTranslate && Math.pow(touchesDiff, 0.85) > triggerDistance) || (!useTranslate && touchesDiff >= triggerDistance * 2)) {\n                refresh = true;\n                container.addClass('pull-up').removeClass('pull-down');\n            } else {\n                refresh = false;\n                container.removeClass('pull-up').addClass('pull-down');\n            }\n        } else {\n\n            container.removeClass('pull-up pull-down');\n            refresh = false;\n            return;\n        }\n    }\n\n    function handleTouchEnd() {\n        if (!isTouched || !isMoved) {\n            isTouched = false;\n            isMoved = false;\n            return;\n        }\n        if (translate) {\n            container.addClass('transitioning');\n            translate = 0;\n        }\n        container.transform('');\n        if (refresh) {\n            //防止二次触发\n            if(container.hasClass('refreshing')) return;\n            container.addClass('refreshing');\n            container.trigger('refresh');\n        } else {\n            container.removeClass('pull-down');\n        }\n        isTouched = false;\n        isMoved = false;\n    }\n\n    // 根据Document/DocumentTouch添加触屏或鼠猫事件\n    eventsTarget.on($.touchEvents.start, handleTouchStart);\n    eventsTarget.on($.touchEvents.move, handleTouchMove);\n    eventsTarget.on($.touchEvents.end, handleTouchEnd);\n\n\n    function destroyPullToRefresh() {\n        eventsTarget.off($.touchEvents.start, handleTouchStart);\n        eventsTarget.off($.touchEvents.move, handleTouchMove);\n        eventsTarget.off($.touchEvents.end, handleTouchEnd);\n    }\n    eventsTarget[0].destroyPullToRefresh = destroyPullToRefresh;\n\n};\n$.pullToRefreshDone = function(container) {\n    $(window).scrollTop(0);//解决微信下拉刷新顶部消失的问题\n    container = $(container);\n    if (container.length === 0) container = $('.pull-down-refresh.refreshing');\n    container.removeClass('refreshing').addClass('transitioning');\n    container.transitionEnd(function() {\n        container.removeClass('transitioning pull-up pull-down');\n    });\n};\n$.pullToRefreshTrigger = function(container) {\n    container = $(container);\n    if (container.length === 0) container = $('.pull-down-refresh');\n    if (container.hasClass('refreshing')) return;\n    container.addClass('transitioning refreshing');\n    container.trigger('refresh');\n};\n\n$.destroyPullToRefresh = function(pageContainer) {\n    pageContainer = $(pageContainer);\n    var pullToRefreshContent = pageContainer.hasClass('pull-down-refresh') ? pageContainer : pageContainer.find('.pull-down-refresh');\n    if (pullToRefreshContent.length === 0) return;\n    if (pullToRefreshContent[0].destroyPullToRefresh) pullToRefreshContent[0].destroyPullToRefresh();\n};\n\n\n// WEBPACK FOOTER //\n// ./src/scroller/pullDown/pull-to-refresh.js"],"sourceRoot":""}